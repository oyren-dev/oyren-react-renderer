import{useState as I,useRef as pe,useCallback as ue}from"react";import D,{useState as J,useRef as oe,useCallback as ne}from"react";import{jsx as H}from"react/jsx-runtime";function U({direction:e,children:d,style:o={},className:r=""}){let a=oe(null),[g,y]=J([50,50]),[i,c]=J(!1),f=ne(p=>{if(!a.current)return;p.preventDefault(),c(!0);let l=a.current.getBoundingClientRect(),t=e==="horizontal"?p.clientX:p.clientY,n=e==="horizontal"?l.width:l.height,s=R=>{R.preventDefault();let S=e==="horizontal"?R.clientX:R.clientY,z=e==="horizontal"?l.left:l.top,P=(S-z)/n*100,F=Math.max(20,Math.min(80,P));y([F,100-F])},u=()=>{c(!1),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",u),document.body.style.cursor="",document.body.style.userSelect=""};document.addEventListener("mousemove",s),document.addEventListener("mouseup",u),document.body.style.cursor=e==="horizontal"?"col-resize":"row-resize",document.body.style.userSelect="none"},[e]),b={display:"flex",flexDirection:e==="horizontal"?"row":"column",height:"100%",width:"100%",...o},x=D.Children.toArray(d);return H("div",{ref:a,className:`resizable-panel-group ${r}`,style:b,children:x.map((p,l)=>{if(D.isValidElement(p)){if(p.type===W)return D.cloneElement(p,{key:l,style:{flex:l<2?`0 0 ${g[l]}%`:"1",minHeight:0,minWidth:0,...p.props.style||{}}});if(p.type===A)return D.cloneElement(p,{key:l,onMouseDown:f,style:{cursor:e==="horizontal"?"col-resize":"row-resize",flexShrink:0,backgroundColor:i?"rgba(147, 51, 234, 0.3)":"rgba(147, 51, 234, 0.1)",transition:"background-color 0.2s ease",...e==="horizontal"?{width:"4px"}:{height:"4px"}}})}return p})})}function W({children:e,defaultSize:d,minSize:o,maxSize:r,...a}){return H("div",{...a,children:e})}function A({className:e="",onMouseDown:d,style:o={},...r}){return H("div",{className:`resizable-handle ${e}`,onMouseDown:d,style:{backgroundColor:"rgba(147, 51, 234, 0.1)",...o},...r})}import{useState as $,useCallback as re}from"react";import{Editor as se}from"@monaco-editor/react";import{useState as _}from"react";import{jsx as k,jsxs as O}from"react/jsx-runtime";function B({contextValue:e}){let[d,o]=_(!1),[r,a]=_(""),{codes:g,selectedFile:y,setSelectedFile:i,createCodeFile:c,deleteCodeFile:f}=e,b=()=>{if(r.trim()){let t=r.trim();t.includes(".")||(t+=".tsx"),c(t),i(t),a(""),o(!1)}},x=t=>{Object.keys(g).length>1&&f(t)},p=t=>{switch(t.split(".").pop()?.toLowerCase()){case"tsx":case"jsx":return"\u269B\uFE0F";case"ts":case"js":return"\u{1F4DC}";case"css":return"\u{1F3A8}";case"json":return"\u2699\uFE0F";default:return"\u{1F4C4}"}},l={container:{display:"flex",flexDirection:"column",gap:"4px"},fileItem:t=>({display:"flex",alignItems:"center",gap:"8px",padding:"8px",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s",backgroundColor:t?"rgba(147, 51, 234, 0.2)":"transparent",border:t?"1px solid rgba(147, 51, 234, 0.3)":"1px solid transparent",color:t?"hsl(217 91% 60%)":"hsl(215.4 16.3% 56.9%)"}),fileName:{flex:1,fontSize:"14px",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},deleteButton:{background:"transparent",border:"none",color:"hsl(215.4 16.3% 56.9%)",cursor:"pointer",padding:"2px",fontSize:"12px",opacity:0,transition:"opacity 0.2s"},createFileForm:{padding:"8px",backgroundColor:"hsla(223, 47%, 11%, 0.5)",borderRadius:"6px",border:"1px solid hsl(216 34% 17%)",display:"flex",flexDirection:"column",gap:"8px"},input:{padding:"6px 8px",fontSize:"14px",backgroundColor:"hsl(223 47% 11%)",border:"1px solid hsl(216 34% 17%)",borderRadius:"4px",color:"hsl(213 31% 91%)",outline:"none"},buttonGroup:{display:"flex",gap:"4px"},button:(t=!1)=>({flex:1,padding:"6px 12px",fontSize:"12px",border:"none",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s",backgroundColor:t?"hsl(217 91% 60%)":"transparent",color:t?"white":"hsl(215.4 16.3% 56.9%)"}),newFileButton:{display:"flex",alignItems:"center",gap:"6px",padding:"8px",fontSize:"14px",backgroundColor:"transparent",border:"none",borderRadius:"6px",color:"hsl(215.4 16.3% 56.9%)",cursor:"pointer",transition:"all 0.2s",width:"100%",justifyContent:"flex-start"}};return O("div",{style:l.container,children:[Object.keys(g).map(t=>O("div",{style:{...l.fileItem(y===t),position:"relative"},onClick:()=>i(t),onMouseEnter:n=>{let s=n.currentTarget.querySelector(".delete-btn");s&&(s.style.opacity="1")},onMouseLeave:n=>{let s=n.currentTarget.querySelector(".delete-btn");s&&(s.style.opacity="0")},children:[k("span",{style:{fontSize:"14px"},children:p(t)}),k("span",{style:l.fileName,children:t}),Object.keys(g).length>1&&k("button",{className:"delete-btn",style:l.deleteButton,onClick:n=>{n.stopPropagation(),x(t)},title:"Delete file",children:"\u{1F5D1}\uFE0F"})]},t)),d?O("div",{style:l.createFileForm,children:[k("input",{style:l.input,placeholder:"filename.tsx",value:r,onChange:t=>a(t.target.value),onKeyDown:t=>{t.key==="Enter"?b():t.key==="Escape"&&(o(!1),a(""))},autoFocus:!0}),O("div",{style:l.buttonGroup,children:[k("button",{style:l.button(!0),onClick:b,disabled:!r.trim(),children:"Create"}),k("button",{style:l.button(!1),onClick:()=>{o(!1),a("")},children:"Cancel"})]})]}):O("button",{style:l.newFileButton,onClick:()=>o(!0),children:[k("span",{style:{fontSize:"14px"},children:"\u2795"}),"New File"]})]})}import{useEffect as q,useRef as Q}from"react";var Z=e=>{let d=Q(e.codes),o=Q(e.selectedFile);return q(()=>{d.current=e.codes},[e.codes]),q(()=>{o.current=e.selectedFile},[e.selectedFile]),{editorConfig:{unusualLineTerminators:"off",wordWrap:"on",scrollbar:{horizontalHasArrows:!0},fontSize:e.fontSize||14,readOnly:e.isReadOnly,minimap:{enabled:!1}},handleEditorDidMount:(c,f)=>{c.onMouseDown(b=>{let{event:x,target:p}=b;if(x.metaKey||x.ctrlKey){let l=p.position;if(l){let t=c.getModel().getWordAtPosition(l);if(t){console.log("Word clicked with Cmd/Ctrl:",t.word);let n=Object.keys(d.current);console.log("selectedFile",o.current);let s=n.filter(u=>u.includes(t.word));if(s.length>0){let u=s[0];e.setSelectedFile(u)}}}}})},handleEditorWillMount:async c=>{c.languages.typescript.typescriptDefaults.setCompilerOptions({target:c.languages.typescript.ScriptTarget.ES2016,allowNonTsExtensions:!0,moduleResolution:c.languages.typescript.ModuleResolutionKind.NodeJs,module:c.languages.typescript.ModuleKind.CommonJS,noEmit:!0,typeRoots:["node_modules/@types"],jsx:c.languages.typescript.JsxEmit.React,jsxFactory:"JSXAlone.createElement"}),c.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!0})},handleEditorChange:c=>{e.setCodes(f=>({...f,[e.selectedFile]:c||""}))},handleBlur:async()=>{e.isReadOnly}}};import{jsx as h,jsxs as w}from"react/jsx-runtime";function N({contextValue:e,theme:d="dark"}){let[o,r]=$(!0),[a,g]=$(256),[y,i]=$(!1),{editorConfig:c,handleEditorWillMount:f,handleEditorDidMount:b,handleEditorChange:x,handleBlur:p}=Z(e),l=e.codes[e.selectedFile]||"",t=re(s=>{s.preventDefault(),s.stopPropagation();let u=s.clientX,R=a,S=P=>{P.preventDefault();let F=P.clientX-u,v=Math.max(200,Math.min(600,R+F));g(v)},z=()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",z),document.body.style.cursor="",document.body.style.userSelect="",i(!1)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",z),document.body.style.cursor="col-resize",document.body.style.userSelect="none",i(!0)},[a]),n={container:{height:"100%",display:"flex",backgroundColor:"hsl(223 47% 11%)",borderRight:"1px solid hsl(216 34% 17%)",overflow:"hidden"},sidebar:{width:`${a}px`,minWidth:"200px",maxWidth:"600px",borderRight:"1px solid hsl(216 34% 17%)",backgroundColor:"hsla(223, 47%, 11%, 0.5)",display:"flex",flexDirection:"column",position:"relative"},sidebarHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",borderBottom:"1px solid hsl(216 34% 17%)"},sidebarContent:{flex:1,overflowY:"auto",padding:"8px"},resizeHandle:{position:"absolute",top:0,right:"-1px",width:"8px",height:"100%",cursor:"col-resize",zIndex:10,backgroundColor:y?"rgba(147, 51, 234, 0.3)":"transparent",display:"flex",alignItems:"center",justifyContent:"center"},resizeIndicator:{width:"2px",height:"48px",backgroundColor:y?"hsl(217 91% 60%)":"hsl(216 34% 17%)",borderRadius:"1px",transition:"background-color 0.2s"},editorArea:{flex:1,display:"flex",flexDirection:"column"},editorHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",borderBottom:"1px solid hsl(216 34% 17%)",backgroundColor:"hsla(0, 0%, 100%, 0.05)"},editorWrapper:{flex:1},button:{background:"transparent",border:"none",color:"hsl(215.4 16.3% 56.9%)",cursor:"pointer",padding:"4px",borderRadius:"4px",fontSize:"16px"}};return w("div",{style:n.container,children:[o&&w("div",{style:n.sidebar,children:[w("div",{style:n.sidebarHeader,children:[w("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h("span",{style:{fontSize:"18px"},children:"\u{1F4C1}"}),h("span",{style:{fontWeight:500,color:"hsl(213 31% 91%)",fontSize:"14px"},children:"Files"})]}),h("button",{style:n.button,onClick:()=>r(!1),title:"Hide file manager",children:"\u268F"})]}),h("div",{style:n.sidebarContent,children:h(B,{contextValue:e})}),h("div",{style:n.resizeHandle,onMouseDown:t,title:"Drag to resize file manager",children:h("div",{style:n.resizeIndicator})})]}),w("div",{style:n.editorArea,children:[w("div",{style:n.editorHeader,children:[w("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[!o&&h("button",{style:n.button,onClick:()=>r(!0),title:"Show file manager",children:"\u268F"}),w("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h("span",{style:{fontSize:"16px"},children:"\u{1F4C4}"}),h("span",{style:{fontSize:"14px",fontWeight:500,color:"hsl(213 31% 91%)"},children:e.selectedFile})]})]}),h("div",{style:{fontSize:"12px",color:"hsl(215.4 16.3% 56.9%)"},children:"TypeScript"})]}),h("div",{style:n.editorWrapper,onBlur:p,tabIndex:-1,children:h(se,{options:{...c,padding:{top:16,bottom:16},lineNumbers:"on",minimap:{enabled:!0},scrollBeyondLastLine:!1,lineHeight:Math.round(c.fontSize*1.5)},theme:d==="dark"?"vs-dark":"vs-light",loading:h("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"hsl(215.4 16.3% 56.9%)"},children:"Loading editor..."}),language:"typescript",beforeMount:f,onMount:b,width:"100%",height:"100%",value:l,onChange:x})})]})]})}import le,{useMemo as ae,useState as te}from"react";import{jsx as M,jsxs as V}from"react/jsx-runtime";function G({onClick:e,overlayText:d="Click to render code"}){let o={container:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"hsla(223, 47%, 11%, 0.2)"},content:{textAlign:"center"},iconContainer:{marginBottom:"24px"},icon:{width:"96px",height:"96px",margin:"0 auto 16px",background:"linear-gradient(135deg, hsl(217 91% 60%), hsl(271 91% 65%))",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"36px"},title:{fontSize:"18px",fontWeight:600,color:"hsl(213 31% 91%)",marginBottom:"8px"},description:{color:"hsl(215.4 16.3% 56.9%)",marginBottom:"24px",maxWidth:"320px"},button:{padding:"12px 24px",fontSize:"16px",fontWeight:600,border:"none",borderRadius:"8px",background:"linear-gradient(135deg, hsl(217 91% 60%), hsl(271 91% 65%))",color:"white",cursor:"pointer",transition:"all 0.2s",display:"inline-flex",alignItems:"center",gap:"8px"}};return M("div",{style:o.container,children:V("div",{style:o.content,children:[M("div",{style:o.iconContainer,children:M("div",{style:o.icon,children:"\u25B6\uFE0F"})}),M("h3",{style:o.title,children:"Ready to Preview"}),M("p",{style:o.description,children:d}),V("button",{style:o.button,onClick:e,onMouseEnter:r=>{r.currentTarget.style.transform="translateY(-2px)",r.currentTarget.style.boxShadow="0 10px 25px rgba(37, 99, 235, 0.3)"},onMouseLeave:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="none"},children:[M("span",{children:"\u25B6\uFE0F"}),"Render Code"]})]})})}import{Runner as ie}from"react-runner";import{jsx as m,jsxs as L}from"react/jsx-runtime";function K({codes:e,scope:d,onRenderedHandler:o,importsError:r,isLoading:a,renderError:g}){let y=e["App.tsx"]||e["App.ts"]||e["App.jsx"]||e["App.js"]||"",i={container:{height:"100%",width:"100%"},errorContainer:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px"},errorContent:{textAlign:"center",maxWidth:"400px"},errorIcon:{fontSize:"48px",marginBottom:"16px"},errorTitle:{fontSize:"18px",fontWeight:600,color:"hsl(213 31% 91%)",marginBottom:"8px"},errorMessage:{fontSize:"14px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",padding:"16px",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.2)",fontFamily:"monospace",whiteSpace:"pre-wrap",textAlign:"left"},loadingContainer:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},loadingContent:{textAlign:"center"},spinner:{width:"32px",height:"32px",border:"4px solid hsl(216 34% 17%)",borderTop:"4px solid hsl(217 91% 60%)",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"},previewWrapper:{height:"100%",overflow:"auto"}};return r?m("div",{style:i.errorContainer,children:L("div",{style:i.errorContent,children:[m("div",{style:i.errorIcon,children:"\u{1F41B}"}),m("h3",{style:i.errorTitle,children:"Import Error"}),m("div",{style:i.errorMessage,children:r})]})}):g?m("div",{style:i.errorContainer,children:L("div",{style:i.errorContent,children:[m("div",{style:i.errorIcon,children:"\u26A0\uFE0F"}),m("h3",{style:i.errorTitle,children:"Runtime Error"}),m("div",{style:i.errorMessage,children:g})]})}):a?m("div",{style:i.loadingContainer,children:L("div",{style:i.loadingContent,children:[m("div",{style:i.spinner}),m("p",{style:{color:"hsl(215.4 16.3% 56.9%)"},children:"Rendering code..."})]})}):L("div",{style:i.container,children:[m("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `}),m("div",{style:i.previewWrapper,children:d&&y&&m(ie,{code:y,scope:d,onRendered:o})})]})}function ee(e,d){let o={...e};return Object.entries(d).forEach(([r,a])=>{try{let g=r.replace("./","").replace(/\.(tsx?|jsx?)$/,"");a.match(/export\s+default\s+/)&&(o.import||(o.import={}),o.import[g]=a)}catch(g){console.warn(`Failed to process file ${r}:`,g)}}),o}import de from"prop-types";import{jsx as E,jsxs as T}from"react/jsx-runtime";var ce={import:{react:le,"prop-types":de}};function X({codes:e,isCodeRendered:d,setIsCodeRendered:o,renderError:r,setRenderError:a,overlayText:g="Click to render code"}){let[y,i]=te(null),[c,f]=te(!0),{"App.js":b,...x}=e,p=Object.entries(x).reduce((s,[u,R])=>(u!=="App.js"&&u!=="App.jsx"&&u!=="App.ts"&&u!=="App.tsx"&&u!=="index.html"&&u!=="ignore.js"&&(s[`./${u}`]=R),s),{}),l=ae(()=>{try{let s=ee(ce,p);return y&&i(null),s}catch(s){i(`${s.filename?`[${s.filename}] `:""}${s.toString()}`)}},[e,y]),t=s=>{s?a(s.toString()):r&&a(null),f(!1)},n={container:{height:"100%",width:"100%",display:"flex",flexDirection:"column",backgroundColor:"hsl(223 47% 11%)"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",borderBottom:"1px solid hsl(216 34% 17%)",backgroundColor:"hsla(0, 0%, 100%, 0.05)"},content:{flex:1,overflow:"hidden"},button:{background:"transparent",border:"none",color:"hsl(215.4 16.3% 56.9%)",cursor:"pointer",padding:"4px",borderRadius:"4px",fontSize:"16px",marginLeft:"4px"}};return T("div",{style:n.container,children:[T("div",{style:n.header,children:[T("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[E("span",{style:{fontSize:"18px"},children:"\u{1F441}\uFE0F"}),E("span",{style:{fontWeight:500,color:"hsl(213 31% 91%)",fontSize:"14px"},children:"Preview"})]}),T("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[d&&E("button",{style:n.button,onClick:()=>o(!1),title:"Stop preview",children:"\u23F9\uFE0F"}),E("button",{style:n.button,onClick:()=>{o(!1),setTimeout(()=>o(!0),100)},title:"Refresh preview",children:"\u{1F504}"})]})]}),E("div",{style:n.content,children:d?E(K,{importsError:y,isLoading:c,codes:e,scope:l,onRenderedHandler:t,renderError:r}):E(G,{onClick:()=>o(!0),overlayText:g})})]})}import{jsx as C,jsxs as j}from"react/jsx-runtime";function ge({codes:e,onCodeChange:d,height:o="600px",showHeader:r=!0,defaultLayout:a="horizontal",readOnly:g=!1,theme:y="dark",fontSize:i=14,className:c=""}){let[f,b]=I(e),[x,p]=I(Object.keys(e)[0]||""),[l,t]=I(!1),[n,s]=I(null),[u,R]=I(a),S=pe(f);S.current=f;let z=ue(v=>{b(v),d?.(v)},[d]),P={codes:f,setCodes:z,selectedFile:x,setSelectedFile:p,isReadOnly:g,renderError:n,setRenderError:s,codesStateRef:S,fontSize:i,uuid:"renderer-demo",loadingCodePage:!1,updateCodePage:async()=>{},authorUuid:"",unsavedChanges:[],setUnsavedChanges:()=>{},setIsReadOnly:()=>{},createCodeFile:v=>{z({...f,[v]:""})},deleteCodeFile:v=>{let{[v]:ye,...Y}=f;z(Y),x===v&&p(Object.keys(Y)[0]||"")}},F=()=>{R(v=>v==="horizontal"?"vertical":"horizontal")};return j("div",{className:`oyren-react-renderer ${c}`,style:{height:o,width:"100%",backgroundColor:"hsl(223 47% 11%)",border:"1px solid hsl(216 34% 17%)",borderRadius:"8px",overflow:"hidden",display:"flex",flexDirection:"column"},children:[r&&j("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",borderBottom:"1px solid hsl(216 34% 17%)",backgroundColor:"hsla(0, 0%, 100%, 0.05)"},children:[j("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[C("span",{style:{fontSize:"18px"},children:"\u26A1"}),C("span",{style:{fontWeight:500,color:"hsl(213 31% 91%)",fontSize:"14px"},children:"React Renderer"})]}),C("button",{onClick:F,style:{background:"transparent",border:"none",color:"hsl(215.4 16.3% 56.9%)",cursor:"pointer",padding:"4px",borderRadius:"4px",fontSize:"16px"},title:`Switch to ${u==="horizontal"?"vertical":"horizontal"} layout`,children:u==="horizontal"?"\u268F":"\u268A"})]}),C("div",{style:{flex:1,minHeight:0},children:j(U,{direction:u,style:{height:"100%"},children:[C(W,{defaultSize:50,minSize:30,children:C("div",{style:{height:"100%"},children:C(N,{contextValue:P,theme:y})})}),C(A,{}),C(W,{defaultSize:50,minSize:30,children:C("div",{style:{height:"100%"},children:C(X,{codes:f,isCodeRendered:l,setIsCodeRendered:t,renderError:n,setRenderError:s})})})]})})]})}export{ge as OyrenReactRenderer};
//# sourceMappingURL=index.mjs.map